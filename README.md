## Protocol Buffer Qobject Macro Compiler Plugin

Please note that this code is under massive constuction.
Don't say we didn't warn.

#### Building

I have only tested this on linux.

1) Clone the QObjectMacroPlugin
2) Change dir into QObjectMacroPlugin
3) Clone google protocol buffers repo. one has to do this because google does not ship all the compiler files in there dev package
4) open the qobjectmacroplugin.pro file in QtQcreator
5) build the plugin
6) go to your build dir
7) use a proto file against the new plugin.

Example:

say you have the proto file

````
syntax = "proto2";
import "TransformerEvent.proto";

package status.test;

/**
 * Information about a device in a device-specific manner.
 *
 * Generally this is something along the lines of a modbus register dump.
 *
 * There are a few common attributes that are defined.  If the device does not have this information,
 * then it should not set them.
 */
message DeviceDetails{
    optional string model_number = 9;
    optional string serial_number = 10;
    optional string firmware_version = 11;
    required int32 bushing_id = 12;
    optional PhoneType type = 2 [default = HOME];

    extensions 1000 to max;

    enum PhoneType {
        MOBILE = 0;
        HOME = 1;
        WORK = 2;
    }

}
````

#### run the compiler against it

````bash
#!/bin/bash
if [[ ! -d $(pwd)/QObjectMacroGenerated/ ]];
then
        mkdir -p QObjectMacroGenerated
fi

/usr/local/bin/protoc \
        --plugin=protoc-gen-qobject_macro_plugin=/home/jmills/Desktop/Synexxus/New/mergeArea/empower-sdu/Application/build-qobject_macro_plugin-Qt_5_8_GCC-Debug/qobject_macro_plugin \
        --qobject_macro_plugin_out=$(pwd)/QObjectMacroGenerated \
        --proto_path=/home/jmills/Desktop/Synexxus/New/mergeArea/empower-sdu/Application/build-qobject_macro_plugin-Qt_5_8_GCC-Debug \
        /home/jmills//Desktop/Synexxus/New/mergeArea/empower-sdu/Application/build-qobject_macro_plugin-Qt_5_8_GCC-Debug/msg1.proto
````


##### this will output
````qt

/*
 This file was generated by Synexxus Code
 Generated on 2017-11-26T22:35:20
*/

#include <QObject>
#include "QQmlConstRefPropertyHelpers.h"
#include "QQmlObjectListModel.h"

#include "transformerevent.pb.h"

using namespace status:test {

#ifndef DEVICEDETAILS
#define DEVICEDETAILS
class DeviceDetails : public QObject
{
    Q_OBJECT
    Q_CLASSINFO( "autor", "Synexxus" )
    Q_CLASSINFO( "url", "http://synexxus.com/" )
    QML_WRITABLE_CSTREF_PROPERTY( QString , modelNumber )
    QML_WRITABLE_CSTREF_PROPERTY( QString , firmwareVersion )
    QML_WRITABLE_CSTREF_PROPERTY( int , bushingId )
    QML_WRITABLE_CSTREF_PROPERTY( QString , serialNumber )
    Q_PROPERTY( PhoneType phonetype phonetype READ phonetype WRITE setphonetype NOTIFY phonetypeChanged)
    Q_ENUMS( PhoneType )
public:
     enum PhoneType        {
        MOBILE = 0
        HOME = 1 ,
        WORK = 2 ,
    };
    void setphonetype( const PhoneType &phonetype )
    {
    if( m_phonetype != phonetype )
    {
        m_phonetype = phonetype;
        emit PhoneTypeChanged();
    }

    PhoneType phonetype()const
    {
        return m_phonetype;
    }
private:
     PhoneType m_phonetype
public:
    explicit DeviceDetails(
        const QString &modelNumber
        ,const QString &firmwareVersion
        ,const int &bushingId
        ,const QString &serialNumber
    ):
        m_QString( &modelNumber )
        ,m_QString( &firmwareVersion )
        ,m_int( &bushingId )
        ,m_QString( &serialNumber )
    {}
};#endif // DEVICEDETAILS

class DeviceDetailsModel : public QQmlObjectListModel<DeviceDetails> {

};
}

````
